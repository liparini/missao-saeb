<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Simulado Matem√°tica</title>
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #4facfe, #00f2fe);
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  overflow: hidden;
}
.quiz-container {
  background: rgba(0,0,0,0.7);
  padding: 20px 30px;
  border-radius: 20px;
  text-align: center;
  max-width: 600px;
  width: 90%;
  box-shadow: 0 0 20px rgba(0,0,0,0.5);
}
.hidden { display: none; }
h1 { margin-bottom: 15px; }
.question { font-size: 20px; margin: 20px 0; }
.answers button {
  display: block;
  width: 100%;
  margin: 10px 0;
  padding: 10px;
  border: none;
  border-radius: 10px;
  background: #00c6ff;
  color: #fff;
  font-size: 16px;
  cursor: pointer;
}
.answers button:hover { background: #0072ff; }

/* Destacar bot√£o selecionado */
.answers button.selected {
  border: 3px solid gold;
  background-color: #ffaa00 !important;
}

.score { margin-top: 12px; font-size: 18px; font-weight: bold; }
canvas { position: fixed; top: 0; left: 0; pointer-events: none; width: 100%; height: 100%; }
button { padding: 10px 20px; font-size: 18px; border: none; border-radius: 10px; background: #00c6ff; color: #fff; cursor: pointer; }
button:hover { background: #0072ff; }

/* Estrelas animadas */
#end-stars {
  font-size: 45px;
  margin: 15px 0;
  color: gold;
  text-shadow: 2px 2px 8px #000;
  display: inline-block;
}
#end-stars span {
  display: inline-block;
  animation: bounce 1s infinite alternate, glow 1.5s infinite;
}
@keyframes bounce {
  from { transform: translateY(0); }
  to   { transform: translateY(-10px); }
}
@keyframes glow {
  0%   { text-shadow: 0 0 5px gold, 0 0 10px orange; }
  50%  { text-shadow: 0 0 15px gold, 0 0 25px yellow; }
  100% { text-shadow: 0 0 5px gold, 0 0 10px orange; }
}

/* Fade nas telas */
.fade {
  opacity: 0;
  transition: opacity 0.6s ease;
}
.fade.show {
  opacity: 1;
}
.feedback {
  margin-top: 10px;
  min-height: 40px;
  font-size: 16px;
  text-align: center;
}
</style>
</head>
<body>
<div class="quiz-container">
  <!-- TELA INICIAL -->
  <div id="start-screen" class="fade show">
    <h1>Bem-vindo √† Miss√£o do Conhecimento! üöÄüìò</h1>
    <p>Alunos da Escola Estadual Nova Aparecida, sua intelig√™ncia ser√° testada!</p>
    <p>Responda corretamente para conquistar a vit√≥ria e brilhar como um verdadeiro campe√£o da Matem√°tica! üåü</p>
    <button id="start-btn">Come√ßar Miss√£o</button>
  </div>

  <!-- QUIZ -->
  <div id="quiz" class="hidden fade">
    <div class="question" id="question"></div>
    <div class="answers" id="answers"></div>
    <div class="feedback" id="feedback"></div>
    <div class="score">Pontua√ß√£o: <span id="score">0</span></div>
    <button id="next-btn" class="hidden">Pr√≥xima Pergunta</button>
  </div>

  <!-- TELA FINAL -->
  <div id="end-screen" class="hidden fade">
    <h1 id="end-title"></h1>
    <p id="end-message"></p>
    <div id="end-stars"></div>
    <button id="restart-btn">Jogar Novamente</button>
  </div>
</div>

<canvas id="confetti"></canvas>

<script>
// Apenas as quest√µes solicitadas
const questions = [
  {question:"Uma empresa de tecnologia desenvolveu um novo aplicativo de edi√ß√£o de fotos que permite aplicar filtros e ajustar o brilho das imagens. O custo de desenvolvimento do aplicativo √© dado pela express√£o C = 2x2 + 5xy - 3y2, onde x representa o n√∫mero de horas de programa√ß√£o e y representa o n√∫mero de horas de design. Se a equipe de desenvolvimento gastou 10 horas de programa√ß√£o e 8 horas de design, qual foi o custo total de desenvolvimento do aplicativo?", answers:["R$ 128,00","R$ 280,00","R$ 292,00","R$ 408,00"], correct:3, explanation:"2*10¬≤ + 5*10*8 - 3*8¬≤ = 408."},
  {question:"Uma empresa de log√≠stica utiliza a express√£o alg√©brica V = (3x2 - 2xy + y2) / (x + y) para calcular a velocidade m√©dia (V) de um ve√≠culo em uma rota espec√≠fica, onde x representa a dist√¢ncia percorrida (em quil√¥metros) e y representa o tempo gasto (em horas). Se um ve√≠culo percorreu 12 quil√¥metros em 4 horas, qual foi a velocidade m√©dia do ve√≠culo nessa rota?", answers:["28 km/h","32 km/h","36 km/h","40 km/h"], correct:2, explanation:"V=(3*12¬≤-2*12*4+4¬≤)/(12+4)=36 km/h."},
  {question:"Se x = 3 e y = -2, qual √© o valor num√©rico da express√£o 2x + 3y?", answers:["0","12","5","-12"], correct:0, explanation:"2*3 + 3*(-2)=0."},
  {question:"Um grupo de 3 pintores leva 4 dias para pintar uma casa. Se o mesmo trabalho fosse realizado por 6 pintores, quantos dias seriam necess√°rios?", answers:["1 dia","2 dias","3 dias","8 dias"], correct:1, explanation:"Trabalho total: 3*4=12 dias-homens; 12/6=2 dias."},
  {question:"Um carro percorre 120 km em 2 horas. Se a velocidade do carro for constante, quantos quil√¥metros ele percorrer√° em 5 horas?", answers:["240 km","300 km","360 km","400 km"], correct:1, explanation:"Velocidade = 60 km/h; 60*5=300 km."},
  {question:"Uma torneira goteja 5 litros de √°gua em 2 horas. Se a torneira gotejar em ritmo constante, quantos litros de √°gua ela vai gotejar em 6 horas?", answers:["10 litros","12 litros","15 litros","20 litros"], correct:2, explanation:"5/2*6=15 litros."},
  {question:"Durante a prepara√ß√£o para uma feira de ci√™ncias, Ana e Pedro est√£o planejando as quantidades de materiais necess√°rias para seus projetos. Ana precisa de 5/8 de metro de fio para montar sua estrutura, enquanto Pedro precisa de 0,75 metros de fio para seu experimento. Para organizar melhor seus materiais, eles decidem converter todas as medidas para a mesma representa√ß√£o. Qual √© a quantidade de fio que Ana deve anotar em n√∫mero decimal?", answers:["0,375 metros","0,714 metros","0,800 metros","0,625 metros"], correct:3, explanation:"5/8 = 0,625 metros."},
  {question:"Um grupo de cientistas est√° realizando um experimento com culturas de bact√©rias. A popula√ß√£o inicial de bact√©rias √© de 2,5 x 10^6. Ap√≥s um per√≠odo de observa√ß√£o, eles notaram que a popula√ß√£o aumentou em 3/4 do seu valor inicial, e ent√£o diminuiu em 20% do novo total. Qual √© a popula√ß√£o final de bact√©rias no experimento?", answers:["4,25 x 10^6","3,50 x 10^6","4,75 x 10^6","5,25 x 10^6"], correct:0, explanation:"2,5 + 1,875 = 4,375; -20% ‚âà 4,25 x 10^6."},
  {question:"Lucas est√° comparando os pre√ßos dos sorvetes que est√£o em oferta na loja do bairro e percebe que alguns est√£o escritos em forma fracion√°ria, enquanto outros est√£o escritos em forma decimal. Ele tem dificuldades em comparar as ofertas, ent√£o ele precisa converter as fra√ß√µes para n√∫meros decimais e vice-versa. Qual das op√ß√µes abaixo mostra as convers√µes corretas?", answers:["3/4 = 0,75 e 0,6 = 1/2","3/4 = 0,6 e 0,6 = 2/3","3/4 = 0,5 e 0,6 = 3/4","3/4 = 0,75 e 0,6 = 3/5"], correct:3, explanation:"3/4=0,75 e 0,6=3/5."},
  {question:"Ana est√° organizando uma venda de limonada para arrecadar fundos na escola. Ela preparou 3/5 litros de suco. Qual √© a quantidade de suco preparada por Ana em n√∫mero decimal?", answers:["0,6 litros","0,5 litros","0,7 litros","0,4 litros"], correct:0, explanation:"3/5 = 0,6 litros."},
  {question:"Na escola em que voc√™ estuda, o gr√™mio estudantil decidiu promover uma arrecada√ß√£o de alimentos para doa√ß√£o. Cada aluno do 7¬∫ ano foi incentivado a contribuir com 5% do total de alimentos arrecadados. Se a escola conseguiu arrecadar um total de 2000 kg de alimentos, qual seria o peso total de alimentos que um aluno do 7¬∫ ano deveria contribuir para atingir a meta estipulada pelo gr√™mio estudantil?", answers:["150 kg","100 kg","50 kg","200 kg"], correct:1, explanation:"5% de 2000 = 100 kg."},
  {question:"A Loja de M√≥veis 'Casa Conforto' est√° oferecendo uma promo√ß√£o onde todos os sof√°s recebem um desconto de 20% no pre√ßo original. Maria est√° interessada em comprar um sof√° que custa R$ 1.500,00. Qual ser√° o pre√ßo que Maria pagar√° pelo sof√° ap√≥s a aplica√ß√£o do desconto?", answers:["R$ 1.200,00","R$ 1.350,00","R$ 1.125,00","R$ 1.100,00"], correct:0, explanation:"1500*0,8=1200."}
];

// VARI√ÅVEIS
let currentQuestion=0, score=0, answered=false, currentAudio=null;
const startScreen=document.getElementById("start-screen");
const startBtn=document.getElementById("start-btn");
const quiz=document.getElementById("quiz");
const questionElement=document.getElementById("question");
const answersElement=document.getElementById("answers");
const feedbackElement=document.getElementById("feedback");
const scoreElement=document.getElementById("score");
const nextBtn=document.getElementById("next-btn");
const endScreen=document.getElementById("end-screen");
const endTitle=document.getElementById("end-title");
const endMessage=document.getElementById("end-message");
const restartBtn=document.getElementById("restart-btn");
const endStars=document.getElementById("end-stars");

// FUN√á√ïES
function showScreen(screen){
  document.querySelectorAll(".quiz-container > div").forEach(div=>{
    div.classList.add("hidden");
    div.classList.remove("fade","show");
  });
  screen.classList.remove("hidden");
  screen.classList.add("fade");
  setTimeout(()=>screen.classList.add("show"),50);
}

// TOCAR SOM
function playSound(url){
  if(currentAudio){
    currentAudio.pause();
    currentAudio.currentTime=0;
  }
  currentAudio = new Audio(url);
  currentAudio.play().catch(err=>console.log("Erro ao tocar som:",err));
}

// IN√çCIO
startBtn.addEventListener("click", startGame);
restartBtn.addEventListener("click", ()=>{
  if(currentAudio){
    currentAudio.pause();
    currentAudio.currentTime=0;
  }
  startGame();
});

function startGame(){
  score=0;
  currentQuestion=0;
  answered=false;
  scoreElement.textContent=score;
  feedbackElement.textContent="";
  nextBtn.classList.add("hidden");
  showScreen(quiz);
  loadQuestion();
}

function loadQuestion(){
  answered=false;
  nextBtn.classList.add("hidden");
  const q = questions[currentQuestion];
  questionElement.textContent = q.question;
  answersElement.innerHTML = "";
  feedbackElement.textContent = "";
  q.answers.forEach((ans,index)=>{
    const btn = document.createElement("button");
    btn.textContent = ans;
    btn.onclick = ()=>{
      if(answered) return;
      answered=true;

      // Destaca a resposta selecionada
      Array.from(answersElement.children).forEach(b=>b.classList.remove("selected"));
      btn.classList.add("selected");

      if(index===q.correct){
        score+=10;
        scoreElement.textContent=score;
        feedbackElement.textContent="‚úÖ Correto!";
        startConfetti();
      } else {
        feedbackElement.textContent="‚ùå Errado! "+q.explanation;
      }
      nextBtn.classList.remove("hidden");
    };
    answersElement.appendChild(btn);
  });
}

nextBtn.addEventListener("click", ()=>{
  currentQuestion++;
  if(currentQuestion>=questions.length){
    endGame();
  } else {
    loadQuestion();
  }
});

// FIM
function endGame(){
  showScreen(endScreen);
  endTitle.textContent="Fim da Miss√£o! üéâ";
  const total = questions.length;
  const percent = (score/(total*10))*100;

  let starCount = 1;
  if(percent>=80) starCount=5;
  else if(percent>=60) starCount=4;
  else if(percent>=40) starCount=3;
  else if(percent>=20) starCount=2;

  endStars.innerHTML="";
  for(let i=0;i<starCount;i++){
    const star = document.createElement("span");
    star.textContent="‚≠ê";
    star.style.animationDelay=`${i*0.2}s`;
    endStars.appendChild(star);
  }

  if(percent>=60){
    endMessage.textContent=`Parab√©ns! Voc√™ acertou ${score/10} de ${total} quest√µes (${percent.toFixed(0)}%). üåü`;
    playSound("som/vitoria.mp3");
  } else {
    endMessage.textContent=`Voc√™ acertou ${score/10} de ${total} quest√µes (${percent.toFixed(0)}%). üò¢ Persista e tente novamente! üí™`;
    playSound("som/derrota.mp3");
  }
}

// CONFETES
const confetti=document.getElementById("confetti");
const ctx=confetti.getContext("2d");
confetti.width=window.innerWidth;
confetti.height=window.innerHeight;
const confettiPieces=[];

function startConfetti(){
  for(let i=0;i<100;i++){
    confettiPieces.push({
      x: Math.random()*confetti.width,
      y: Math.random()*confetti.height - confetti.height,
      w:10,h:10,
      color:"hsl("+Math.random()*360+",100%,50%)",
      speed:Math.random()*5+2
    });
  }
}
function updateConfetti(){
  ctx.clearRect(0,0,confetti.width,confetti.height);
  confettiPieces.forEach((p,i)=>{
    p.y+=p.speed;
    if(p.y>confetti.height) confettiPieces.splice(i,1);
    ctx.fillStyle=p.color;
    ctx.fillRect(p.x,p.y,p.w,p.h);
  });
  requestAnimationFrame(updateConfetti);
}
updateConfetti();
</script>
</body>
</html>
